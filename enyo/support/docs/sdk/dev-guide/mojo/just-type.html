<!DOCTYPE html>
<html>
	<head>
		<title>$if(pagetitle)$$pagetitle$$endif$</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="_css/chrome.css" />
		<link rel="stylesheet" href="../_css/chrome.css" />
		<link rel="stylesheet" href="../../_css/chrome.css" />
		<link rel="stylesheet" href="../../../_css/chrome.css" />
		<script src="_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="_js/doc.js" type="text/javascript"></script>
		<script src="../_js/doc.js" type="text/javascript"></script>
		<script src="../../_js/doc.js" type="text/javascript"></script>
		<script src="../../../_js/doc.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content">
    
    <h1 id="just-type">
      Just Type
    </h1>
    <p>
      <img src="/images/UniversalSearch.jpg"><br>
      Just Type as it first appears
    </p>
    <p>
      This article describes how to integrate an apps with Palm's &quot;Just Type&quot; (formerly known as &quot;Universal Search&quot;) feature. Just Type activates when a user begins typing in Launcher or Card view—starting an activity which can include searching, sending an email, making a phone call, and so on.
    </p>
    <p>
      An app can integrate with three different Just Type components:
    </p>
    <ol style="list-style-type: decimal">
      <li>
        <p>
          <strong>Quick Actions</strong> — Displays apps that initiate a new action with the user-entered text. For exampe: a new email, a new memo, etc.
        </p>
      </li>
      <li>
        <p>
          <strong>Launch and Search</strong> — Displays apps that search the Web or the Cloud.
        </p>
      </li>
      <li>
        <p>
          <strong>db8 search</strong> — Just Type searches through db8 stored objects. If a user selects your app's data in the result set, your app is launched.
        </p>
      </li>
    </ol>
    <p>
      You can configure each of these in your app's appinfo.json file.
    </p>
    <h2 id="about-db8-and-json">
      About db8 and JSON
    </h2>
    <p>
      db8 is an addition to the webOS JavaScript framework's current storage methods designed to meet the needs of robust, high-performance applications. Though not a database itself, it is a service (com.palm.db) available on the device bus that interfaces to an embedded database storing JSON data objects. Javascript applications can use API calls provided with the JavaScript Foundation libraries to interface with the db8 service.
    </p>
    <p>
      JSON is a lightweight data-interchange text format based on a subset of the JavaScript programming language that is easy for humans to read and write and for machines to parse and generate. Like XML, JSON contains name/value pair collections and ordered list of values (i.e., arrays).
    </p>
    <p>
      For more information on JSON, see the following websites:
    </p>
    <ul>
      <li>
        <a href="http://www.json.org/">JSON objects, values and format</a>
      </li>
      <li>
        <a href="http://tools.ietf.org/html/draft-zyp-json-schema-02">JSON schemas</a>
      </li>
    </ul>
    <p>
      A primer on how JSON data objects are formatted is beyond the scope of this document—consult the two links above for more information. However, in brief:
    </p>
    <ul>
      <li>Curly brackets ('{', '}') are used to enclose objects.
      </li>
      <li>Angle brackets ('[', ']') are used to enclose arrays.
      </li>
      <li>Colons (':') are used as delimiters in name/value pairs.
      </li>
      <li>Quotes (&quot;) are used for string values. Numeric and boolean values are not quoted.
      </li>
    </ul>
    <p>
      <strong>In this section:</strong>
    </p>
    <ul>
      <li>Configuring appinfo.json for Just Type
      </li>
      <li>Appinfo.json Keywords
      </li>
      <li>Configuring Permissions for db8 Search
      </li>
    </ul>
    <h2 id="configuring-appinfo.json-for-just-type">
      Configuring appinfo.json for Just Type
    </h2>
    <p>
      You can add the following object and sub-objects to your app's appinfo.json file to configure it for Just Type.
    </p>
    <h3 id="schema">
      Schema
    </h3>
    <blockquote>
      <pre>
<code>{
  &quot;universalSearch&quot; : {
      &quot;action&quot; :  { 
          &quot;displayName&quot; : string,
          &quot;url&quot;         : string,
          &quot;launchParam&quot; : string | any object
      },
      &quot;dbsearch&quot;:  {
          &quot;displayName&quot;        : string,
          &quot;url&quot;                : string,
          &quot;launchParam&quot;        : string,
          &quot;launchParamDbField&quot; : string,
          &quot;displayFields&quot;      : string array,
          &quot;dbQuery&quot;            : db8 query object
      },
      &quot;search&quot; :   { 
          &quot;displayName&quot;  : string,
          &quot;url&quot;          : string,
          &quot;launchParam&quot;  : string | any object
      }
  }
}
</code>
</pre>
    </blockquote>
    <h3 id="action">
      action
    </h3><img src="/images/QuickActions.jpg">
    <p>
      This object configures an app for the &quot;Quick Actions&quot; menu in Just Type. When launched, the application is passed the field defined with &quot;launchParam&quot; as an argument. This field is HTML-encoded, so for example, any spaces would be replaced with &quot;%20&quot;.
    </p>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            displayName
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Display name for the application in the &quot;Quick Actions&quot; menu.
          </td>
        </tr>
        <tr>
          <td>
            url
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Application ID, i.e., &quot;com.palm.contacts&quot;
          </td>
        </tr>
        <tr>
          <td>
            launchParam
          </td>
          <td>
            Yes
          </td>
          <td>
            string or any object
          </td>
          <td>
            HTML-encoded, passed as an argument when the app is launched.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="dbsearch">
      dbsearch
    </h3>
    <table border="1">
      <tr align="center">
        <td>
          <img src="/images/DB8search.jpg">
          <p>
            db8 search indicating 5 matching entries
          </p>
        </td>
        <td>
          &#160;
        </td>
        <td>
          <img src="/images/DB8expanded.jpg">
          <p>
            db8 search with expanded list
          </p>
        </td>
      </tr>
    </table>
    <p>
      This object defines how Just Type accesses an application's db8 stored data. The application is launched if the user selects one of the result set entries returned. You can configure the query Just Type uses to access db8 storage, the result fields it displays, and the parameters it passes when the app is launched. Including this object also means you have to give Just Type permission to access your db8 stored data, see Configuring Permissions for db8 Search.
    </p>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            displayName
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            App display name in the Just Type application.
          </td>
        </tr>
        <tr>
          <td>
            url
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Application ID.
          </td>
        </tr>
        <tr>
          <td>
            launchParam
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Name of field passed as an argument to the app.
          </td>
        </tr>
        <tr>
          <td>
            launchParamDbField
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Name of field in database whose value is passed in &quot;launchParam&quot;.
          </td>
        </tr>
        <tr>
          <td>
            displayFields
          </td>
          <td>
            Yes
          </td>
          <td>
            string array
          </td>
          <td>
            db8 query result set fields displayed to user in Just Type, i.e., &quot;firstname&quot;, &quot;lastname&quot;, ...
          </td>
        </tr>
        <tr>
          <td>
            dbQuery
          </td>
          <td>
            Yes
          </td>
          <td>
            string array
          </td>
          <td>
            db8 query used in Just Type. The &quot;val&quot; field value (in the query's where clause) is set to the user-entered search text. See the db8 documentation for information on formatting a db8 query.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="search">
      search
    </h3><img src="/images/search.jpg">
    <p>
      This object configures an app for the Launch and Search menu in Just Type. When launched, the application is passed the field defined with &quot;launchParam&quot; as an argument. This field can be a string or an object of any type. Again, this field will be HTML-encoded.
    </p>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            displayName
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Display name for the application in the &quot;Launch and Search&quot; menu.
          </td>
        </tr>
        <tr>
          <td>
            url
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Application ID, i.e., &quot;com.palm.contacts&quot;
          </td>
        </tr>
        <tr>
          <td>
            launchParam
          </td>
          <td>
            Yes
          </td>
          <td>
            string or any object
          </td>
          <td>
            HTML-encoded, passed as an argument when the app is launched.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example 1</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;universalSearch&quot;: {
      &quot;action&quot;: {
          &quot;displayName&quot;: &quot;Sample DB8&quot;,
          &quot;url&quot;:&quot;com.palm.db8sample&quot;,
          &quot;launchParam&quot;:&quot;searchString&quot;
      },
      &quot;dbsearch&quot;: {
          &quot;displayName&quot;:&quot;DB8&quot;,
          &quot;url&quot;:&quot;com.palm.db8sample&quot;,
          &quot;launchParam&quot;:&quot;playerId&quot;,
          &quot;launchParamDbField&quot;:&quot;_id&quot;,
          &quot;displayFields&quot;:[&quot;firstname&quot;,&quot;lastname&quot;,&quot;Club&quot;],
          &quot;dbQuery&quot;:{&quot;from&quot;:&quot;com.palm.db8sample:1&quot;,
              &quot;where&quot;:[{&quot;prop&quot;:&quot;firstname&quot;,&quot;op&quot;:&quot;?&quot;,&quot;val&quot;:&quot;&quot;}],&quot;orderBy&quot;:&quot;firstname&quot;,&quot;limit&quot;:40}
      }
  }
}
</code>
</pre>
    </blockquote>
    <p>
      In this example, the user-entered text becomes the value for &quot;#{searchTerms}&quot; when launching the app from &quot;Quick Actions&quot; and the value for the &quot;val&quot; field when searching db8 storage.
    </p>
    <p>
      For example, if the user typed &quot;John&quot;, it becomes &quot;launchParam&quot;:{&quot;searchString&quot;:&quot;John&quot;} and &quot;val&quot;:&quot;John&quot;.
    </p>
    <p>
      The JavaScript code to handle the Quick Actions launch this would look something like this:
    </p>
    <blockquote>
      <pre>
<code>this.launchParams = arg;
if (this.launchParams.searchString) 
{
  /* Do something, i.e., query database with searchString and display
}
else if(this.launchParams.playerId)
{
  /* Do something, i.e., query database with ID and display
}
</code>
</pre>
    </blockquote>
    <p>
      <strong>Example 2</strong>
    </p>
    <blockquote>
      <pre>
<code>{
  &quot;universalSearch&quot;:{
      &quot;search&quot; :  {
          &quot;displayName&quot;: &quot;Palm App Catalog&quot;,
          &quot;url&quot;:&quot;com.palm.app.findapps&quot;,
          &quot;launchParam&quot;:{&quot;common&quot;:{&quot;sceneType&quot;:&quot;search&quot;,&quot;params&quot;:{&quot;type&quot;:&quot;query&quot;,&quot;search&quot;:&quot;#{searchTerms}&quot;}}}
      }
  }
}
</code>
</pre>
    </blockquote>
    <p>
      In this example, &quot;#(searchTerms)&quot; is replaced with the user-entered text.
    </p>
    <h2 id="appinfo.json-keywords">
      Appinfo.json Keywords
    </h2>
    <p>
      Another option you have with appinfo.json is to add a &quot;keywords&quot; field, which is an array of strings containing keyword meta-data. For example:
    </p>
    <blockquote>
      <pre>
<code>&quot;keywords&quot;: [&quot;dts&quot;]
</code>
</pre>
    </blockquote>
    <p>
      Just Type will list apps that contain the user-entered text in their &quot;keywords&quot; values.
    </p>
    <p>
      <strong>NOTE:</strong> You may need permission from Palm to do this.
    </p>
    <h2 id="configuring-permissions-for-db8-search">
      Configuring Permissions for db8 Search
    </h2>
    <p>
      If you want Just Type to access your db8 data storage as indicated with the &quot;dbsearch&quot; object in appinfo.json, then you need to create (or add to) a permissions file in &quot;/etc/palm/db/permissions/&quot;. This file has to have the same name as your app, i.e., &quot;com.palm.sample.app&quot;. Permissions are granted to applications for each db8 <em>kind</em> and its data objects. For Just Type, you would have to grant read permissions to &quot;com.palm.launcher&quot; (pardon the somewhat unintuitive name).
    </p>
    <p>
      For example, if your app had only one kind, you would have a permissions file with JSON configuration that looked like this:
    </p>
    <blockquote>
      <pre>
<code>[
  {
      &quot;type&quot;: &quot;db.kind&quot;,
      &quot;object&quot;: &quot;com.palm.sample:1&quot;,
      &quot;caller&quot;: &quot;com.palm.launcher&quot;,
      &quot;operations&quot;: {
          &quot;read&quot;: &quot;allow&quot;
      }
  }
]
</code>
</pre>
    </blockquote>
    <p>
      <strong>NOTE:</strong> It's likely that third party developers will <strong><em>NOT</em></strong> get direct access to this directory, but, in JavaScript, you can implement this programmatically with the following &quot;serviceRequest&quot; call:
    </p>
    <blockquote>
      <pre>
<code>var permObj =[{&quot;type&quot;:&quot;db.kind&quot;,&quot;object&quot;:'com.palm.sample:1', 
  &quot;caller&quot;:&quot;com.palm.launcher&quot;, &quot;operations&quot;:{&quot;read&quot;:&quot;allow&quot;}}];

this.controller.serviceRequest(&quot;palm://com.palm.db/&quot;, {
  method: &quot;putPermissions&quot;,
  parameters: {&quot;permissions&quot;:permObj},
  onSuccess: function() { Mojo.Log.info(&quot;DB permission granted successfully!&quot;);},
  onFailure: function() { Mojo.Log.error(&quot;DB failed to grant permissions!&quot;);}
});
</code>
</pre>
    </blockquote>
		</div>
	</body>
</html>