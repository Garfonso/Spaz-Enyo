<!DOCTYPE html>
<html>
	<head>
		<title>$if(pagetitle)$$pagetitle$$endif$</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="_css/chrome.css" />
		<link rel="stylesheet" href="../_css/chrome.css" />
		<link rel="stylesheet" href="../../_css/chrome.css" />
		<link rel="stylesheet" href="../../../_css/chrome.css" />
		<script src="_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="_js/doc.js" type="text/javascript"></script>
		<script src="../_js/doc.js" type="text/javascript"></script>
		<script src="../../_js/doc.js" type="text/javascript"></script>
		<script src="../../../_js/doc.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content">
    
    <h1 id="system-services">
      System Services
    </h1>
    <p>
      The system exposes a general set of services enabling applications to access various system settings. It is part of the System Manager and is available only when the UI is running. The following types of methods are available:
    </p>
    <ul>
      <li>Preferences
      </li>
      <li>Time
      </li>
      <li>Wallpaper
      </li>
    </ul>
    <h2 id="preferences-methods">
      Preferences Methods
    </h2>
    <p>
      This section describes the following methods:
    </p>
    <ul>
      <li>getPreferences
      </li>
      <li>getPreferenceValues
      </li>
      <li>setPreferences
      </li>
    </ul>
    <h3 id="getpreferences">
      getPreferences
    </h3>
    <p>
      The getPreferences method retrieves the values for preferences keys specified in the passed array. If subscribe is set to true, then getPreferences sends an update any time the values of the keys change.
    </p>
    <p>
      Required parameter:
    </p>
    <ul>
      <li>keys
      </li>
    </ul>
    <h4 id="parameters">
      Parameters
    </h4>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            keys
          </td>
          <td>
            array
          </td>
          <td>
            An array of keys for which to retrieve values.
          </td>
        </tr>
        <tr>
          <td>
            subscribe
          </td>
          <td>
            boolean
          </td>
          <td>
            If true, getPreferences sends an update whenever the value of one of the keys changes.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="return-handling">
      Return Handling
    </h4>
    <p>
      <strong>onSuccess</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            {no name}
          </td>
          <td>
            JSON object
          </td>
          <td>
            Key-value pairs containing the values for the requested preferences. If the requested preferences key or keys do not exist, the object is empty.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>onFailure</strong>
    </p>
    <p>
      <strong>No onFailure callback is required.</strong>
    </p>
    <h4 id="example">
      Example
    </h4>
    <blockquote>
      <pre>
<code>this.controller.serviceRequest('palm://com.palm.systemservice', {
  method:&quot;getPreferences&quot;,
  parameters:{&quot;keys&quot;:[&quot;locale&quot;]},
  onSuccess: myCallback,
  onFailure: myFailureCallback
}); 
</code>
</pre>
    </blockquote>
    <p>
      The above call returns the following, for example:
    </p>
    <blockquote>
      <pre>
<code>{ &quot;locale&quot;: { &quot;languageCode&quot;: &quot;en&quot;, &quot;countryCode&quot;: &quot;us&quot; } } 
</code>
</pre>
    </blockquote>
    <h3 id="getpreferencevalues">
      getPreferenceValues
    </h3>
    <p>
      Retrieve the list of valid values for the specified key. If the key is of a type that takes one of a discrete set of valid values, getPreferenceValues returns that set. For example, calling getPreferences on timeFormat returns &quot;HH12&quot; and &quot;HH24&quot;. Otherwise, getPreferenceValues returns nothing for the key.
    </p>
    <p>
      Required parameter:
    </p>
    <ul>
      <li>key
      </li>
    </ul>
    <h4 id="parameters-1">
      Parameters
    </h4>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            key
          </td>
          <td>
            text
          </td>
          <td>
            The key for which to retrieve valid values.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="return-handling-1">
      Return Handling
    </h4>
    <p>
      <strong>onSuccess</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            {no name}
          </td>
          <td>
            JSON object
          </td>
          <td>
            The key and the valid values.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>onFailure</strong>
    </p>
    <p>
      No return value.
    </p>
    <h4 id="example-1">
      Example
    </h4>
    <blockquote>
      <pre>
<code>this.controller.serviceRequest('palm://com.palm.systemservice', {
  method:&quot;getPreferenceValues&quot;,
  parameters:{&quot;key&quot;:&quot;timeFormat&quot; },
  onSuccess: myCallback,
  onFailure: myFailureCallback
});    
</code>
</pre>
    </blockquote>
    <p>
      The above call returns the following JSON object:
    </p>
    <blockquote>
      <pre>
<code>{ &quot;timeFormat&quot;: [ &quot;HH12&quot;, &quot;HH24&quot; ] }
</code>
</pre>
    </blockquote>
    <h3 id="setpreferences">
      setPreferences
    </h3>
    <p>
      Sets preference keys to specified values.
    </p>
    <p>
      Required parameter:
    </p>
    <ul>
      <li>params
      </li>
    </ul>
    <h4 id="parameters-2">
      Parameters
    </h4>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            params
          </td>
          <td>
            JSON object
          </td>
          <td>
            An object containing one or more key-value pairs.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="return-handling-2">
      Return Handling
    </h4>
    <p>
      <strong>onSuccess</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (true) Indicates whether the call was successful.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>onFailure</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (false) Indicates whether the call was successful.
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            string
          </td>
          <td>
            Text describing the reason the call failed.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="example-2">
      Example
    </h4>
    <blockquote>
      <pre>
<code>this.controller.serviceRequest('palm://com.palm.systemservice', {
  method:&quot;setPreferences&quot;,
  parameters:{&quot;food&quot;:&quot;pizza&quot;},
  onSuccess: myCallback,
  onFailure: myFailureCallback
});  
</code>
</pre>
    </blockquote>
    <h2 id="time-method">
      Time Method
    </h2>
    <p>
      This section describes the following method:
    </p>
    <ul>
      <li>getSystemTime
      </li>
    </ul>
    <h3 id="getsystemtime">
      getSystemTime
    </h3>
    <p>
      Requests the system time, and if the subscribe property is true, receives notifications when the time zone changes and/or the system time changes by a significant amount (currently 5 min.).
    </p>
    <p>
      For info about world time zones, see <a href="http://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones">WikipediaÂ®</a>.
    </p>
    <p>
      Required parameter:
    </p>
    <ul>
      <li>subscribe
      </li>
    </ul>
    <h4 id="parameters-3">
      Parameters
    </h4>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            subscribe
          </td>
          <td>
            boolean
          </td>
          <td>
            If true, receives notifications when the time zone changes and/or the system time changes by a system-defined threshold (currently 5 min.).
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="return-handling-3">
      Return Handling
    </h4>
    <p>
      <strong>onSuccess</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            localtime
          </td>
          <td>
            object
          </td>
          <td>
            The time and date for the current time zone. The format is: &quot;year&quot;:, &quot;month&quot;:, &quot;day&quot;:, &quot;hour&quot;:, &quot;minute&quot;:, &quot;second&quot;:<br>
            Where:
            <ul>
              <li>year: the year (i.e., 2009)
              </li>
              <li>month: the calendar number of the month (i.e., from 1 for January to 12 for December)
              </li>
              <li>day: the calendar number of the day (i.e., from 1 for the first day of the month to 28, 29, 30, or 31, depending on the month)
              </li>
              <li>hour: 24-hour time format (i.e., from 0 for midnight to 23 for 11 P.M.)
              </li>
              <li>minute: standard range of 0-59
              </li>
              <li>second: standard range of 0-59
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>
            offset
          </td>
          <td>
            integer
          </td>
          <td>
            The number of minutes from UTC. This can be negative for time zones west of UTC and positive for time zones east of UTC.
          </td>
        </tr>
        <tr>
          <td>
            timezone
          </td>
          <td>
            string
          </td>
          <td>
            The current system time zone. It has the same format as the &quot; <em>TZ</em> &quot; environment variable. For information, see <a href="http://www.gnu.org/software/libc/manual/html_node/TZ-Variable.html" target="_blank">http://www.gnu.org/software/libc/manual/html_node/TZ-Variable.html</a> .
          </td>
        </tr>
        <tr>
          <td>
            TZ
          </td>
          <td>
            string
          </td>
          <td>
            The time zone abbreviation in standard Unix format that corresponds to the current time zone (e.g., PDT (Pacific Daylight Time)).
          </td>
        </tr>
        <tr>
          <td>
            utc
          </td>
          <td>
            integer
          </td>
          <td>
            The number of seconds since Unix Epoch (midnight of January 1, 1970 UTC).
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>onFailure</strong>
    </p>
    <p>
      The function always succeeds, providing that com.palm.systemservice is running.
    </p>
    <h4 id="example-3">
      Example
    </h4>
    <blockquote>
      <pre>
<code>this.controller.serviceRequest('palm://com.palm.systemservice/time', {
  method:&quot;getSystemTime&quot;,
  parameters:{},
  onSuccess: myCallback,
  onFailure: myFailureCallback
});   
</code>
</pre>
    </blockquote>
    <h2 id="wallpaper-methods">
      Wallpaper Methods
    </h2>
    <p>
      This section describes the following methods:
    </p>
    <ul>
      <li>wallpaper/importWallpaper
      </li>
      <li>wallpaper/refresh
      </li>
      <li>wallpaper/info
      </li>
      <li>wallpaper/deleteWallpaper
      </li>
    </ul>
    <p>
      The Wallpaper API lets your application change (or detect) the wallpaper (the image that appears on the screen behind the Launcher or Card view).
    </p>
    <p>
      To set wallpaper on the device:
    </p>
    <ol style="list-style-type: decimal">
      <li>Use importWallpaper to convert an image to a wallpaper object.
      </li>
      <li>Pass the wallpaper object as the new value for the wallpaper key in setPreferences.
      </li>
    </ol>
    <h3 id="wallpaperimportwallpaper">
      wallpaper/importWallpaper
    </h3>
    <p>
      Converts an image to a wallpaper for the device. The image is either re-centered and cropped, or scaled:
    </p>
    <ul>
      <li>If no focus or scale parameters are passed, importWallpaper scales the entire image to 320 x 480 pixels.
      </li>
      <li>If focus parameters are passed but scale is not specified, the image is re-centered at the point specified by the focus parameters and cropped. Black is added anywhere the image does not reach the edge of the screen.
      </li>
      <li>If scale is passed but focus is not specified, then the image is scaled and then cropped.
      </li>
      <li>If focus and scale parameters are passed, the image is first scaled and then re-centered and cropped.
      </li>
    </ul>
    <p>
      The focusX and focusY parameters are the coordinates of the new center of the image. The scale parameter determines the new size of the image.
    </p>
    <p>
      Once the image has been converted, the wallpaper is stored in the internal list of wallpapers on the device, and is available until deleted using deleteWallpaper. Note: the internal list of wallpapers is not the same as the Wallpapers folder that is visible to the user.
    </p>
    <p>
      Required parameter:
    </p>
    <ul>
      <li>target
      </li>
    </ul>
    <h4 id="parameters-4">
      Parameters
    </h4>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            target
          </td>
          <td>
            string
          </td>
          <td>
            The URL of the image file to be converted to a wallpaper (must be PNG or JPG). Only the file:// scheme is supported (no remote schemes are supported)
          </td>
        </tr>
        <tr>
          <td>
            focusX
          </td>
          <td>
            float
          </td>
          <td>
            The horizontal coordinate of the new center of the image, from 0.0 (left edge) to 1.0 (right edge). A value of 0.5 preserves the current horizontal center of the image.
          </td>
        </tr>
        <tr>
          <td>
            focusY
          </td>
          <td>
            float
          </td>
          <td>
            The vertical coordinate of the new center of the image, from 0.0 (top edge) to 1.0 (bottom edge). A value of 0.5 preserves the current vertical center of the image.
          </td>
        </tr>
        <tr>
          <td>
            scale
          </td>
          <td>
            float
          </td>
          <td>
            The new scale of the image, from 0.1 to 10.0 times the current size.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="return-handling-4">
      Return Handling
    </h4>
    <p>
      <strong>onSuccess</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (true) Indicates whether the call was successful.
          </td>
        </tr>
        <tr>
          <td>
            wallpaper
          </td>
          <td>
            JSON object
          </td>
          <td>
            A wallpaper object that can be passed to setPreferences to set the wallpaper key.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>onFailure</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (false) Indicates whether the call was successful.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="example-4">
      Example
    </h4>
    <blockquote>
      <pre>
<code>this.controller.serviceRequest('palm://com.palm.systemservice/wallpaper', {
  method:&quot;importWallpaper&quot;,
  parameters:{
      &quot;target&quot;:&quot;file:///media/internal/photos/mypic.jpg&quot;
  },
  onSuccess: myCallback,
  onFailure: myFailureCallback
});  
</code>
</pre>
    </blockquote>
    <h3 id="wallpaperrefresh">
      wallpaper/refresh
    </h3>
    <p>
      Refreshes the internal list of available wallpapers. Under normal circumstances, there is no need to call wallpaper/refresh directly.
    </p>
    <h4 id="parameters-5">
      Parameters
    </h4>
    <p>
      None.
    </p>
    <h4 id="return-handling-5">
      Return Handling
    </h4>
    <p>
      <strong>onSuccess</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (true) Indicates whether the call was successful.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>onFailure</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (false) Indicates whether the call was successful.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 id="wallpaperinfo">
      wallpaper/info
    </h3>
    <p>
      Retrieves a wallpaper object using either the wallpaperName or wallpaperFile attribute.
    </p>
    <p>
      Required parameters:
    </p>
    <ul>
      <li>Either wallpaperName or wallpaperFile
      </li>
    </ul>
    <h4 id="parameters-6">
      Parameters
    </h4>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            wallpaperName
          </td>
          <td>
            string
          </td>
          <td>
            The wallpaper attribute that specifies the name of the wallpaper.
          </td>
        </tr>
        <tr>
          <td>
            wallpaperFile
          </td>
          <td>
            string
          </td>
          <td>
            The wallpaper attribute that specifies the file containing the wallpaper image.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="return-handling-6">
      Return Handling
    </h4>
    <p>
      <strong>onSuccess</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (true) Indicates whether the call was successful.
          </td>
        </tr>
        <tr>
          <td>
            wallpaper
          </td>
          <td>
            JSON object
          </td>
          <td>
            A wallpaper object that can be passed to setPreferences to set the wallpaper key.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>onFailure</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (false) Indicates whether the call was successful.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="example-5">
      Example
    </h4>
    <blockquote>
      <pre>
<code>this.controller.serviceRequest('palm://com.palm.systemservice/wallpaper', {
  method:&quot;info&quot;,
  parameters:{&quot;wallpaperName&quot;:&quot;flowers&quot;},
  onSuccess: myCallback,
  onFailure: myFailureCallback
});
</code>
</pre>
    </blockquote>
    <h3 id="wallpaperdeletewallpaper">
      wallpaper/deleteWallpaper
    </h3>
    <p>
      Deletes the specified wallpaper from the list of available wallpapers on the device.
    </p>
    <p>
      Warning: Do not call deleteWallpaper on the currently active wallpaper!
    </p>
    <p>
      Required parameter:
    </p>
    <ul>
      <li>wallpaperName
      </li>
    </ul>
    <h4 id="parameters-7">
      Parameters
    </h4>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            wallpaperName
          </td>
          <td>
            string
          </td>
          <td>
            The wallpaperName attribute of the wallpaper object to delete.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="return-handling-7">
      Return Handling
    </h4>
    <p>
      <strong>onSuccess</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (true) Indicates whether the call was successful.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>onFailure</strong>
    </p>
    <table border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            boolean
          </td>
          <td>
            (false) Indicates whether the call was successful.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="example-6">
      Example
    </h4>
    <blockquote>
      <pre>
<code>this.controller.serviceRequest('palm://com.palm.systemservice/wallpaper', {
  method:&quot;deleteWallpaper&quot;,
  parameters:{&quot;wallpaperName&quot;:&quot;flowers&quot;},
  onSuccess: myCallback,
  onFailure: myFailureCallback
}); 
</code>
</pre>
    </blockquote>
    <h2 id="sample-code">
      Sample Code
    </h2>
    <p>
      See Services Sample.
    </p>
		</div>
	</body>
</html>