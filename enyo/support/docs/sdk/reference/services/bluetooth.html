<!DOCTYPE html>
<html>
	<head>
		<title>$if(pagetitle)$$pagetitle$$endif$</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="_css/chrome.css" />
		<link rel="stylesheet" href="../_css/chrome.css" />
		<link rel="stylesheet" href="../../_css/chrome.css" />
		<link rel="stylesheet" href="../../../_css/chrome.css" />
		<script src="_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="_js/doc.js" type="text/javascript"></script>
		<script src="../_js/doc.js" type="text/javascript"></script>
		<script src="../../_js/doc.js" type="text/javascript"></script>
		<script src="../../../_js/doc.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content">
    
    <h1 id="bluetooth-serial-port-protocol-spp">
      Bluetooth Serial Port Protocol (SPP)
    </h1>
    <p>
      webOS 2.0 exposes the Bluetooth SPP to applications needing to take advantage of certain bluetooth devices. At this time, <em>only</em> the SPP is exposed. The code samples contain an example Bluetooth project which opens a port to a Bluetooth GPS device and reads position data from it.
    </p>
    <p>
      The general sequence is to get a list of paired devices from the Bluetooth service, then look for the device of interest within that list. If a device of interest is found, subscribe to Bluetooth notifications, then connect to the desired device. When a notification arrives from the connected device, call the <code>open</code> method on that instance, followed by the <code>read</code> method, which returns an object with the data.
    </p>
    <p>
      To stop listening to the data, <code>close</code> the port followed by a <code>disconnect</code>.
    </p>
    <h2 id="uri">
      URI
    </h2>
    <p>
      Currently the Bluetooth SPP service exposes two URIs: one for general access profile (GAP) methods, and one for serial port access. The URI for GAP is:
    </p>
    <blockquote>
      <pre>
<code>com.palm.bluetooth/gap
</code>
</pre>
    </blockquote>
    <p>
      The URI for serial port access is:
    </p>
    <blockquote>
      <pre>
<code>com.palm.bluetooth/spp
</code>
</pre>
    </blockquote>
    <h2 id="common-parameter-types">
      Common Parameter Types
    </h2>
    <p>
      The following type descriptions are common to many of the methods used with Bluetooth SPP services.
    </p>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Format
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            BT Address
          </td>
          <td>
            &quot;address&quot;:&quot;AA:BB:CC:DD:EE:FF&quot;
          </td>
          <td>
            Bluetooth device address where AA, BB, etc are hex digits for an IEEE standard MAC address
          </td>
        </tr>
        <tr>
          <td>
            profile
          </td>
          <td>
            &quot;profile&quot;:&quot;hfg|audio|pan|pbap|a2dp|opp&quot;
          </td>
          <td>
            profile names
          </td>
        </tr>
        <tr>
          <td>
            state
          </td>
          <td>
            &quot;state&quot;:&quot;off|on|disconnected|connecting|connected&quot;
          </td>
          <td>
            The state of the Bluetooth radio or profile.
          </td>
        </tr>
      </tbody>
    </table>
    <h2 id="method--gap">
      Method--GAP
    </h2>
    <p>
      This section describes the following method:
    </p>
    <ul>
      <li>gettrusteddevices
      </li>
    </ul>
    <h3 id="gettrusteddevices">
      gettrusteddevices
    </h3>
    <h4 id="parameters">
      Parameters
    </h4>
    <p>
      <code>gettrusteddevices</code> does not take any parameters.
    </p>
    <h4 id="returns">
      Returns
    </h4>
    <h2 id="methods--spp">
      Methods--SPP
    </h2>
    <p>
      This section describes the following methods:
    </p>
    <ul>
      <li>subscribenotifications
      </li>
      <li>connect
      </li>
      <li>selectservice
      </li>
      <li>open
      </li>
      <li>read
      </li>
      <li>close
      </li>
      <li>disconnect
      </li>
    </ul>
    <h3 id="subscribenotifications">
      subscribenotifications
    </h3>
    <h4 id="parameters-1">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            subscribe
          </td>
          <td>
            boolean
          </td>
          <td>
            Subscribes or unsubscribes to Bluetooth SPP notifications. Set as &quot;true&quot; to subscribe and &quot;false&quot; to unsubscribe.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-1">
      Returns
    </h4>
    <p>
      Returns an object with the following parameters:
    </p>
    <ul>
      <li>
        <code>returnValue</code>--boolean
      </li>
      <li>
        <code>trusteddevices</code>--array comprising the following items:
        <ul>
          <li>
            <code>address</code>--string containing the Bluetooth address, e.g., <code>&quot;00:0d:b5:38:c0:3f&quot;</code>
          </li>
          <li>
            <code>name</code>--string containing the name of the device, e.g., <code>&quot;BT-GPS-38C03F&quot;</code>
          </li>
          <li>
            <code>cod</code>--integer
          </li>
          <li>
            <code>renamed</code>--boolean
          </li>
          <li>
            <code>status</code>--string, either <code>connected</code> or <code>disconnected</code>
          </li>
        </ul>
      </li>
    </ul>
    <h3 id="connect">
      connect
    </h3>
    <h4 id="parameters-2">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            address
          </td>
          <td>
            BT Address
          </td>
          <td>
            Address of the device.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-2">
      Returns
    </h4>
    <p>
      Returns an object with the following parameters:
    </p>
    <ul>
      <li>
        <code>notification</code>--string. May be <code>notifnservicenames</code> if service names are being returned, <code>notifnconnected</code> if the device has connected, or <code>notifndisconnected</code> if the device has disconnected.
      </li>
      <li>
        <code>instanceId</code>--integer containing the context of the requested service.
      </li>
      <li>
        <code>services</code>--string, containing service names, if the response was a <code>notifnservicenames</code>.
      </li>
    </ul>
    <h3 id="selectservice">
      selectservice
    </h3>
    <h4 id="parameters-3">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            integer
          </td>
          <td>
            Context of the subscribed service.
          </td>
        </tr>
        <tr>
          <td>
            servicename
          </td>
          <td>
            string
          </td>
          <td>
            Name of the service to be selected. Provided by the object returned from <code>subscribenotifications</code>.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-3">
      Returns
    </h4>
    <p>
      <code>selectservice</code> does not return any parameters.
    </p>
    <h3 id="open">
      open
    </h3>
    <h4 id="parameters-4">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            integer
          </td>
          <td>
            Context of the subscribed service.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-4">
      Returns
    </h4>
    <p>
      <code>open</code> does not return any parameters.
    </p>
    <h3 id="read">
      read
    </h3>
    <h4 id="parameters-5">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            integer
          </td>
          <td>
            Context of the subscribed service.
          </td>
        </tr>
        <tr>
          <td>
            dataLength
          </td>
          <td>
            integer
          </td>
          <td>
            Size of the buffer to be returned.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-5">
      Returns
    </h4>
    <p>
      On success, returns an object with the following parameters:
    </p>
    <ul>
      <li>
        <code>returnValue</code>--boolean
      </li>
      <li>
        <code>data</code>--string
      </li>
      <li>
        <code>dataLength</code>--integer
      </li>
    </ul>
    <p>
      On failure, read returns:
    </p>
    <ul>
      <li>
        <code>returnValue</code>--boolean
      </li>
      <li>
        <code>errorText</code>--string
      </li>
    </ul>
    <h3 id="close">
      close
    </h3>
    <h4 id="parameters-6">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            integer
          </td>
          <td>
            Context of the subscribed service.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-6">
      Returns
    </h4>
    <p>
      On success, returns an object with a boolean <code>returnValue</code>.
    </p>
    <p>
      On failure, returns an object with a boolean <code>returnValue</code>, and an integer <code>errorCode</code>.
    </p>
    <h3 id="disconnect">
      disconnect
    </h3>
    <h4 id="parameters-7">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            address
          </td>
          <td>
            BT Address
          </td>
          <td>
            Bluetooth device address.
          </td>
        </tr>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            integer
          </td>
          <td>
            Context of the subscribed service.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-7">
      Returns
    </h4>
    <p>
      The <code>disconnect</code> method does not return any parameters in the returned object unless there is an error. In the event of an error, the property <code>errorCode</code> will be found in the returned object.
    </p>
		</div>
	</body>
</html>